#!/usr/bin/env node

var join = require('path').join;
var spawn = require('child_process').spawn;

/**
 * Re-create the args passed so that we can pass through node args to node
 * itself when calling the "real" bin. Simple since hermes has no flags.
 */

var bin = join(__dirname, '_hermes');
var args = process.argv.slice(2);
args.push(bin);

/**
 * Spawn.
 */

var child = spawn(process.argv[0], args, { customFds: [0,1,2] });

child.on('exit', function(code, signal){
  process.on('exit', function(){
    signal
      ? process.kill(process.pid, signal)
      : process.exit(code);
  });
});